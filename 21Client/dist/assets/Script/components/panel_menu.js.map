{"version":3,"sources":["../../../../assets/Script/components/panel_menu.js"],"names":["cc","Class","extends","Component","properties","atlas","type","SpriteAtlas","default","onLoad","btn_open_close","node","getChildByName","node_menu","btn_exit","btn_bgm","btn_effect","on","onOpenCloseBtnClick","bind","onExitBtnClick","onBgmBtnClick","onEffectBtnClick","bgm_on","sys","localStorage","getItem","effect_on","show_menu","onDestroy","showSpriteFrame","spriteName","frame","getSpriteFrame","sprite","getComponentInChildren","Sprite","spriteFrame","error","event","active","setItem","onfire","fire"],"mappings":"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","file":"panel_menu.js","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        atlas: {\r\n            type: cc.SpriteAtlas,\r\n            default: null\r\n        },\r\n    },\r\n\r\n    onLoad: function() {\r\n        this.btn_open_close = this.node.getChildByName(\"btn_open_close\")\r\n        this.node_menu = this.node.getChildByName(\"node_menu\")\r\n        this.btn_exit = this.node_menu.getChildByName(\"btn_exit\")\r\n        this.btn_bgm = this.node_menu.getChildByName(\"btn_bgm\")\r\n        this.btn_effect = this.node_menu.getChildByName(\"btn_effect\")\r\n\r\n        this.btn_open_close.on(\"touchend\", this.onOpenCloseBtnClick.bind(this)) //每个按钮注册事件\r\n        this.btn_exit.on(\"touchend\", this.onExitBtnClick.bind(this)) //每个按钮注册事件\r\n        this.btn_bgm.on(\"touchend\", this.onBgmBtnClick.bind(this)) //每个按钮注册事件\r\n        this.btn_effect.on(\"touchend\", this.onEffectBtnClick.bind(this)) //每个按钮注册事件\r\n\r\n        //读取存储\r\n        this.bgm_on = (cc.sys.localStorage.getItem(\"bgm_on\") || \"true\") == \"true\"\r\n        this.effect_on = (cc.sys.localStorage.getItem(\"effect_on\") || \"true\") == \"true\"\r\n        this.show_menu = false\r\n\r\n    },\r\n\r\n    onDestroy: function() {\r\n\r\n    },\r\n\r\n    showSpriteFrame(node, spriteName) {\r\n        var frame = this.atlas.getSpriteFrame(spriteName);\r\n        var sprite = node.getComponentInChildren(cc.Sprite)\r\n        if (sprite && frame) {\r\n            sprite.spriteFrame = frame\r\n        } else {\r\n            cc.error(\"showSpriteFrame 错误:\" + spriteName)\r\n        }\r\n\r\n\r\n    },\r\n\r\n    //打开关闭\r\n    onOpenCloseBtnClick: function(event) {\r\n        this.show_menu = !this.show_menu\r\n        this.node_menu.active = this.show_menu\r\n        var spriteName = this.show_menu ? \"res-shuiguoji-exit-hide_n\":\"res-shuiguoji-exit-show_n\" \r\n        this.showSpriteFrame(this.btn_open_close, spriteName)\r\n\r\n    },\r\n\r\n\r\n    //退出房间\r\n    onExitBtnClick: function(event) {\r\n\r\n    },\r\n    //音乐开关\r\n    onBgmBtnClick: function(event) {\r\n\r\n        this.bgm_on = !this.bgm_on\r\n        var spriteName = this.bgm_on ? \"res-shuiguoji-exit-music_e\" : \"res-shuiguoji-exit-music_d\"\r\n        this.showSpriteFrame(this.btn_bgm, spriteName)\r\n        cc.sys.localStorage.setItem(\"bgm_on\", this.bgm_on)\r\n        onfire.fire(\"MUSIC_ON_OFF\", \"bgm\", this.bgm_on)\r\n\r\n    },\r\n\r\n    //音效开关\r\n    onEffectBtnClick: function(event) {\r\n        this.effect_on = !this.effect_on\r\n        var spriteName = this.effect_on ? \"res-shuiguoji-exit-effect_e\" : \"res-shuiguoji-exit-effect_d\"\r\n        this.showSpriteFrame(this.btn_effect, spriteName)\r\n        cc.sys.localStorage.setItem(\"effect_on\", this.effect_on)\r\n        onfire.fire(\"MUSIC_ON_OFF\", \"effect\", this.effect_on)    },\r\n\r\n\r\n});"]}