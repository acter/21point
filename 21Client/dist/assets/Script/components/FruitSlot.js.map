{"version":3,"sources":["../../../../assets/Script/components/FruitSlot.js"],"names":["cc","Class","extends","Component","onLoad","isAlways","light","node","getChildByName","start","bright","delayTime","fadeOutTime","opacity","active","stopAllActions","runAction","sequence","fadeOut","alwaysLight","turnOff","twinkle","slotTime","forever","blinkAction","blink","Math","floor","repeatForever","waitAni","waitTime","self","callFunc","bind"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;AAELC,YAAQ,kBAAW;AACf,aAAKC,QAAL,GAAgB,KAAhB,CADe,CACQ;AACvB,aAAKC,KAAL,GAAa,KAAKC,IAAL,CAAUC,cAAV,CAAyB,gBAAzB,CAAb;AACH,KALI;AAMLC,SANK,mBAMG,CAEP,CARI;;;AAUL;AACAC,YAAQ,gBAASC,SAAT,EAAoBC,WAApB,EAAiC;AACrCD,oBAAYA,aAAa,CAAzB;AACAC,sBAAcA,eAAe,GAA7B;AACA,aAAKN,KAAL,CAAWO,OAAX,GAAqB,GAArB;AACA,aAAKP,KAAL,CAAWQ,MAAX,GAAoB,IAApB;AACA,aAAKR,KAAL,CAAWS,cAAX;AACA,YAAI,CAAC,KAAKV,QAAV,EAAoB;AAChB,iBAAKC,KAAL,CAAWU,SAAX,CAAqBhB,GAAGiB,QAAH,CAAYjB,GAAGW,SAAH,CAAaA,SAAb,CAAZ,EAAqCX,GAAGkB,OAAH,CAAWN,WAAX,CAArC,CAArB;AACH;AACJ,KApBI;;AAsBL;AACAO,iBAAa,uBAAW;AACpB,aAAKd,QAAL,GAAgB,IAAhB;;AAEA,aAAKC,KAAL,CAAWS,cAAX;AACA,aAAKT,KAAL,CAAWO,OAAX,GAAqB,GAArB;AACA,aAAKP,KAAL,CAAWQ,MAAX,GAAoB,IAApB;AACH,KA7BI;;AA+BL;AACAM,aAAS,mBAAW;AAChB,aAAKb,IAAL,CAAUQ,cAAV;AACA,aAAKT,KAAL,CAAWS,cAAX;AACA,aAAKT,KAAL,CAAWO,OAAX,GAAqB,GAArB;AACA,aAAKP,KAAL,CAAWQ,MAAX,GAAoB,KAApB;AACA,aAAKT,QAAL,GAAgB,KAAhB;AACH,KAtCI;;AAwCL;AACAgB,aAAS,iBAASC,QAAT,EAAmBC,OAAnB,EAA4B;;AAEjCD,mBAAWA,YAAY,CAAvB;AACA,aAAKhB,KAAL,CAAWS,cAAX;AACA,aAAKT,KAAL,CAAWO,OAAX,GAAqB,GAArB;;AAEA,YAAIW,cAAcxB,GAAGyB,KAAH,CAASH,QAAT,EAAmBI,KAAKC,KAAL,CAAWL,WAAW,GAAtB,IAA6B,CAAhD,CAAlB;AACA,YAAIC,OAAJ,EAAa;AACTC,0BAAcA,YAAYI,aAAZ,EAAd;AACH;AACD,aAAKtB,KAAL,CAAWU,SAAX,CAAqBQ,WAArB;AACH,KApDI;AAqDL;AACAK,aAAS,iBAASC,QAAT,EAAmB;;AAExB,aAAKvB,IAAL,CAAUQ,cAAV;AACA,aAAKT,KAAL,CAAWO,OAAX,GAAqB,GAArB;AACA,aAAKP,KAAL,CAAWQ,MAAX,GAAoB,IAApB;AACA,YAAIiB,OAAO,IAAX;AACA,aAAKxB,IAAL,CAAUS,SAAV,CAAoBhB,GAAGiB,QAAH,CAAYjB,GAAGW,SAAH,CAAamB,QAAb,CAAZ,EAAoC9B,GAAGgC,QAAH,CAAY,YAAW;AAC3ED,iBAAKxB,IAAL,CAAUS,SAAV,CAAoBhB,GAAGiB,QAAH,CAAYjB,GAAGgC,QAAH,CAAYD,KAAKrB,MAAL,CAAYuB,IAAZ,CAAiBF,IAAjB,EAAuB,GAAvB,EAA4B,CAA5B,CAAZ,CAAZ,EAAyD/B,GAAGW,SAAH,CAAa,CAAb,CAAzD,EAA0EiB,aAA1E,EAApB;AACH,SAFuD,CAApC,CAApB;AAGH;;AAED;AAjEK,CAAT","file":"FruitSlot.js","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] http://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] http://www.cocos2d-x.org/docs/creator/en/scripting/life-cycle-callbacks.html\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    onLoad: function() {\r\n        this.isAlways = false; //是否常亮\r\n        this.light = this.node.getChildByName(\"instance_light\")\r\n    },\r\n    start() {\r\n\r\n    },\r\n\r\n    //点亮\r\n    bright: function(delayTime, fadeOutTime) {\r\n        delayTime = delayTime || 0;\r\n        fadeOutTime = fadeOutTime || 0.5;\r\n        this.light.opacity = 255;\r\n        this.light.active = true;\r\n        this.light.stopAllActions();\r\n        if (!this.isAlways) {\r\n            this.light.runAction(cc.sequence(cc.delayTime(delayTime), cc.fadeOut(fadeOutTime)));\r\n        }\r\n    },\r\n\r\n    //常高\r\n    alwaysLight: function() {\r\n        this.isAlways = true;\r\n\r\n        this.light.stopAllActions();\r\n        this.light.opacity = 255;\r\n        this.light.active = true;\r\n    },\r\n\r\n    //关灯\r\n    turnOff: function() {\r\n        this.node.stopAllActions();\r\n        this.light.stopAllActions();\r\n        this.light.opacity = 255;\r\n        this.light.active = false;\r\n        this.isAlways = false;\r\n    },\r\n\r\n    //闪烁\r\n    twinkle: function(slotTime, forever) {\r\n\r\n        slotTime = slotTime || 2;\r\n        this.light.stopAllActions();\r\n        this.light.opacity = 255;\r\n\r\n        var blinkAction = cc.blink(slotTime, Math.floor(slotTime / 0.2) + 1);\r\n        if (forever) {\r\n            blinkAction = blinkAction.repeatForever();\r\n        }\r\n        this.light.runAction(blinkAction);\r\n    },\r\n    //待机动画\r\n    waitAni: function(waitTime) {\r\n\r\n        this.node.stopAllActions();\r\n        this.light.opacity = 255;\r\n        this.light.active = true;\r\n        var self = this;\r\n        this.node.runAction(cc.sequence(cc.delayTime(waitTime), cc.callFunc(function() {\r\n            self.node.runAction(cc.sequence(cc.callFunc(self.bright.bind(self, 0.5, 1)), cc.delayTime(4)).repeatForever());\r\n        })));\r\n    }\r\n\r\n    // update (dt) {},\r\n});"]}