{"version":3,"sources":["../../../../assets/Script/components/betbutton.js"],"names":["GD","require","subGameMSG","define","gameCMD","Util","cc","Class","extends","Component","properties","onLoad","loadInfo","mainScene","roomIndex","_myScore","_betNum","_betButtons","_otherButtons","_operateButtons","TYPE_BTN_MAX","TYPE_BTN_FIRST","TYPE_BTN_SECOND","TYPE_BTN_THIRD","TYPE_BTN_FOURTH","TYPE_BTN_FIFTH","TYPE_BTN_LAST","TYPE_BTN_SPLIT","TYPE_BTN_DOUBLE","TYPE_BTN_STAND","TYPE_BTN_HIT","TYPE_BTN_HELP","ALL_BETS","initNodes","loadBetButtons","loadOtherButtons","loadOperateButtons","betbtn_list","node","getChildByName","operateContainer","showBetLayer","data","myScore","active","setBetLayerVisible","showOperateLayer","setOperateLayerVisible","visible","setBetButtonsOpacity","visiable","setOperateButtonsOpacity","setButtonsOpacity","buttons","opacity","i","lenI","length","btn","button","getComponent","Button","setButtonEnable","flag","interactable","concat","bets","types","len","betNum","children","Label","string","numberTran","type","on","onButtonHandler","bind","push","points","names","onMaxButtonHandler","myUserItem","clientKernel","maxBets","maxBet","score","sendWagerMessage","onLastButtonHandler","_lastBetNum","console","log","hideBetButton","onBetButtonHandler","curBets","target","setBetButtonsDisabled","sendBetMessage","onOperateButtonHandler","msg","TYPE_SPLIT","TYPE_DOUBLE","TYPE_STAND","TYPE_HIT","sendOperateMessage","sendSocketData","MDM_GF_GAME","TYPE_WAGER","baseBet","j","lenJ","curBetNum","setSplitAndDouble","canSplit","canDouble","splitBtn","findButtonByType","doubleBtn","_canSplit","_canDouble","splitBtnButton","doubleBtnButton"],"mappings":"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","file":"betbutton.js","sourcesContent":["var GD = require(\"GD\");\r\nvar subGameMSG = require(\"SubGameMSG\").subGameMSG\r\nvar define = require('define');\r\nvar gameCMD = define.gameCMD;\r\nvar Util = require('Util');\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n    properties: {\r\n\r\n\r\n    },\r\n    onLoad: function() {\r\n    },\r\n    loadInfo(mainScene){\r\n        this.mainScene = mainScene;\r\n        this.roomIndex = this.mainScene.roomIndex;\r\n        this._myScore = 0;\r\n        this._betNum = 0\r\n        this._betButtons = []\r\n        this._otherButtons = []\r\n        this._operateButtons =  [],\r\n        this.TYPE_BTN_MAX=0;\r\n        this.TYPE_BTN_FIRST=1;\r\n        this.TYPE_BTN_SECOND=2;\r\n        this.TYPE_BTN_THIRD=3;\r\n        this.TYPE_BTN_FOURTH=4;\r\n        this.TYPE_BTN_FIFTH=5;\r\n        this.TYPE_BTN_LAST=6;\r\n        this.TYPE_BTN_SPLIT=7;\r\n        this.TYPE_BTN_DOUBLE=8;\r\n        this.TYPE_BTN_STAND=9;\r\n        this.TYPE_BTN_HIT=10;\r\n        this.TYPE_BTN_HELP=11;\r\n        this.ALL_BETS={\r\n            '0': [100, 200, 500, 1000, 2000],\r\n            '1': [500, 2000, 5000, 10000, 200000],\r\n            '2': [1000, 10000, 100000, 1000000, 5000000],\r\n            '3': [10000, 100000, 1000000, 10000000, 20000000],\r\n        }\r\n        this.initNodes();\r\n        //加载下注按钮\r\n        this.loadBetButtons();\r\n        //加载其他按钮\r\n        this.loadOtherButtons();\r\n        // 加载操作层按钮\r\n        this.loadOperateButtons();\r\n    },\r\n    //加载节点\r\n    initNodes:function(){\r\n        this.betbtn_list = this.node.getChildByName('bet_btn_list');\r\n        this.operateContainer = this.node.getChildByName('card-handle');\r\n    },\r\n    // 显示下注层\r\n    showBetLayer: function(data, myScore){\r\n        this._myScore = myScore;\r\n        this.betbtn_list.active = true;\r\n        this.operateContainer.active = false;\r\n        this.setBetLayerVisible(true);\r\n\r\n    },\r\n    // 显示操作层\r\n    showOperateLayer: function(){\r\n        this.operateContainer.active = true;\r\n        this.betbtn_list.active = false;\r\n        this.setOperateLayerVisible(true);\r\n    },\r\n    // 设置下注层的按钮可点击\r\n    setBetLayerVisible: function(visible){\r\n        // 如果可见,则恢复正常且可点击\r\n        visible && this.setBetButtonsOpacity(255);\r\n    },\r\n    //设置操作按钮的可点击\r\n    setOperateLayerVisible:function(visiable){\r\n        visiable && this.setOperateButtonsOpacity(255);\r\n    },\r\n    // 设置按钮的透明度\r\n    setButtonsOpacity: function(buttons, opacity){\r\n        for (var i = 0, lenI = buttons.length; i < lenI; i++) {\r\n            var btn = buttons[i];\r\n            var button = btn.getComponent(cc.Button);\r\n            btn.opacity = opacity;\r\n            this.setButtonEnable(button,opacity==255);\r\n        }\r\n    },\r\n    //设置按钮的可用性\r\n    setButtonEnable:function(button,flag){\r\n        button.interactable = flag;\r\n    },\r\n    // 设置下注按钮的透明度\r\n    setBetButtonsOpacity: function(opacity){\r\n        this.setButtonsOpacity(this._betButtons.concat(this._otherButtons), opacity);\r\n    },\r\n    //设置操作按钮的透明度\r\n    setOperateButtonsOpacity: function(opacity){\r\n        this.setButtonsOpacity(this._operateButtons, opacity);\r\n    },\r\n    /*\r\n       * 界面渲染\r\n       * */\r\n    // 加载下注层按钮\r\n    loadBetButtons: function(){\r\n        var bets = this.ALL_BETS[this.mainScene.roomIndex];\r\n        var types = [\r\n            this.TYPE_BTN_FIRST, this.TYPE_BTN_SECOND, this.TYPE_BTN_THIRD,\r\n            this.TYPE_BTN_FOURTH, this.TYPE_BTN_FIFTH\r\n        ];\r\n        for (var i = 0, len = bets.length; i < len; i++) {\r\n            var betNum = bets[i];\r\n            var btn = this.betbtn_list.children[i+1]\r\n            //改变label的string值\r\n            btn.children[0].getComponent(cc.Label).string = Util.numberTran(betNum)\r\n            btn.type = types[i];\r\n            btn.betNum = betNum;\r\n            btn.on('touchend',this.onButtonHandler.bind(this))\r\n            this._betButtons.push(btn);\r\n        }\r\n    },\r\n    // 加载其他按钮\r\n    loadOtherButtons: function(){\r\n        var types = [this.TYPE_BTN_MAX, this.TYPE_BTN_LAST];\r\n        var points = [0,6];\r\n        for (var i = 0, len = types.length; i < len; i++) {\r\n            var btn = this.betbtn_list.children[points[i]]\r\n            btn.type = types[i];\r\n            btn.on('touchend',this.onButtonHandler.bind(this))\r\n            this._otherButtons.push(btn);\r\n        }\r\n    },\r\n    // 加载操作层按钮\r\n    loadOperateButtons: function(){\r\n        var names = [\"split\", \"double\", \"stand\", \"hit\"];\r\n        var types = [\r\n            this.TYPE_BTN_SPLIT, this.TYPE_BTN_DOUBLE, this.TYPE_BTN_STAND, this.TYPE_BTN_HIT\r\n        ];\r\n        // this._operateContainerLayer = new cc.Layer().to(this).hide();\r\n        for (var i = 0, len = names.length; i < len; i++) {\r\n            var btn = this.operateContainer.children[i];\r\n            btn.type = types[i];\r\n            btn.on('touchend',this.onButtonHandler.bind(this));\r\n            this._operateButtons.push(btn);\r\n        }\r\n    },\r\n    // 点击最大下注数按钮的梳理函数\r\n    onMaxButtonHandler: function(btn){\r\n        var myUserItem = GD.clientKernel.myUserItem;\r\n        var maxBets = {'0': 2000, '1': 5000000, '2': 20000000};\r\n        var maxBet = maxBets[this.mainScene.roomIndex];\r\n\r\n        var betNum = myUserItem.score >= maxBet ? maxBet : myUserItem.score;\r\n        // 发送下注信息\r\n        this.sendWagerMessage(betNum)\r\n    },\r\n    // 点击上局下注按钮的处理函数\r\n    onLastButtonHandler: function(btn){\r\n        if (this._lastBetNum == 0) {\r\n            // 吐丝提示,上局没有下注\r\n            // ToastSystemInstance.buildToast(\"您上局没有下注!\");\r\n            console.log('您上局没有下注!')\r\n        } else {\r\n            // 发送下注信息\r\n            this.sendWagerMessage(this._lastBetNum);\r\n            // 隐藏下注层\r\n            this.hideBetButton()\r\n        }\r\n    },\r\n    onBetButtonHandler: function(btn){\r\n        if (this._myScore == null) return;\r\n\r\n        var types = [\r\n            this.TYPE_BTN_FIRST, this.TYPE_BTN_SECOND, this.TYPE_BTN_THIRD,\r\n            this.TYPE_BTN_FOURTH, this.TYPE_BTN_FIFTH\r\n        ];\r\n\r\n        var curBets = this.ALL_BETS[this.mainScene.roomIndex];//[100, 200, 500, 1000, 2000]\r\n\r\n        for (var i = 0, len = types.length; i < len; i++) {//[1,2,3,4,5]\r\n            if (types[i] ==  btn.target.type) {\r\n                this._betNum += curBets[i];\r\n                break;\r\n            }\r\n        }\r\n        // 设置下注按钮的可用性\r\n        this.setBetButtonsDisabled();\r\n        // 发送下注信息\r\n        this.sendBetMessage(this._betNum)\r\n\r\n    },\r\n    // 发送下注信息\r\n    sendBetMessage: function(betNum){\r\n        var curBets = this.ALL_BETS[this.mainScene.roomIndex];\r\n        var maxBet = curBets[curBets.length - 1];\r\n        this._lastBetNum = betNum;\r\n        // 发送下注信息\r\n        this.sendWagerMessage(betNum);\r\n        betNum >= maxBet && this.hideBetButton();\r\n    },\r\n    onButtonHandler: function(btn){\r\n        switch (btn.target.type){\r\n            case this.TYPE_BTN_MAX:\r\n                this.onMaxButtonHandler(btn);\r\n                break;\r\n            case this.TYPE_BTN_LAST:\r\n                this.onLastButtonHandler(btn);\r\n                break;\r\n            case this.TYPE_BTN_FIRST:\r\n            case this.TYPE_BTN_SECOND:\r\n            case this.TYPE_BTN_THIRD:\r\n            case this.TYPE_BTN_FOURTH:\r\n            case this.TYPE_BTN_FIFTH:\r\n                this.onBetButtonHandler(btn);\r\n                break;\r\n            case this.TYPE_BTN_SPLIT:\r\n            case this.TYPE_BTN_DOUBLE:\r\n            case this.TYPE_BTN_STAND:\r\n            case this.TYPE_BTN_HIT:\r\n                this.onOperateButtonHandler(btn);\r\n                break;\r\n        }\r\n\r\n    },\r\n    // 点击分牌、加倍、停牌、要牌按钮的处理函数\r\n    onOperateButtonHandler: function(btn){\r\n        var msg = \"\";\r\n        switch (btn.target.type) {\r\n            case this.TYPE_BTN_SPLIT:\r\n                msg = subGameMSG.TYPE_SPLIT;\r\n                break;\r\n\r\n            case this.TYPE_BTN_DOUBLE:\r\n                msg = subGameMSG.TYPE_DOUBLE;\r\n                break;\r\n\r\n            case this.TYPE_BTN_STAND:\r\n                msg = subGameMSG.TYPE_STAND;\r\n                break;\r\n\r\n            case this.TYPE_BTN_HIT:\r\n                msg = subGameMSG.TYPE_HIT;\r\n                break;\r\n        }\r\n        // 按钮设置为半透明,并且不能点击\r\n        this.setOperateButtonsOpacity(200);\r\n        // 发送操作的消息\r\n        this.sendOperateMessage(msg, {});\r\n    },\r\n\r\n    //发送操作消息\r\n    sendOperateMessage:function(msg,data){\r\n\r\n        GD.clientKernel.sendSocketData(gameCMD.MDM_GF_GAME,msg,data);\r\n    },\r\n    // 发送下注信息\r\n    sendWagerMessage: function(betNum){\r\n        var curBets = this.ALL_BETS[this.mainScene.roomIndex];\r\n        var maxBet = curBets[curBets.length - 1];\r\n        betNum >= maxBet && this.hideBetButton();\r\n        this._lastBetNum = betNum;\r\n        GD.clientKernel.sendSocketData(gameCMD.MDM_GF_GAME,subGameMSG.TYPE_WAGER, {\r\n            'data':{\r\n                baseBet: betNum\r\n            }\r\n        });\r\n    },\r\n    //隐藏下注层\r\n    hideBetButton:function(){\r\n        this.betbtn_list.active = false\r\n    },\r\n\r\n    // 当前下注与按钮的值相加超过最大值的不能点\r\n    setBetButtonsDisabled: function(){\r\n        var curBets = this.ALL_BETS[this.mainScene.roomIndex];\r\n        var maxBet = curBets[curBets.length - 1];\r\n        maxBet = maxBet > this._myScore ? this._myScore : maxBet;\r\n\r\n        // 当前下注与按钮的值相加超过最大值的不能点\r\n        for (var j = 0, lenJ = this._betButtons.length; j < lenJ; j++) {\r\n            var btn = this._betButtons[j];\r\n            var curBetNum = this._betNum + btn.betNum;\r\n            if (curBetNum > maxBet || curBetNum > this._myScore) {\r\n                //移除点击事件并且改变透明度\r\n                btn.opacity = 150;\r\n                var button = btn.getComponent(cc.Button);\r\n                this.setButtonEnable(button,false)\r\n            }\r\n        }\r\n        // 下过注,上局下注就不能点击\r\n        for (var i = 0, lenI = this._otherButtons.length; i < lenI; i++) {\r\n            var btn = this._otherButtons[i];\r\n            if (this._betNum > 0 && btn.type == this.TYPE_BTN_LAST) {\r\n                //移除点击事件并且改变透明度\r\n                btn.opacity = 150;\r\n                var button = btn.getComponent(cc.Button);\r\n                this.setButtonEnable(button,false)\r\n            }\r\n        }\r\n    },\r\n    setSplitAndDouble: function(canSplit, canDouble){\r\n        var splitBtn = this.findButtonByType(this.TYPE_BTN_SPLIT);\r\n        var doubleBtn = this.findButtonByType(this.TYPE_BTN_DOUBLE);\r\n\r\n        if (canSplit) {\r\n            splitBtn.opacity = 255;\r\n        } else {\r\n            splitBtn.opacity = 100;\r\n        }\r\n\r\n        if (canDouble) {\r\n            doubleBtn.opacity = 255;\r\n        } else {\r\n            doubleBtn.opacity = 100;\r\n        }\r\n\r\n        this._canSplit = canSplit;\r\n        this._canDouble = canDouble;\r\n        var splitBtnButton = splitBtn.getComponent(cc.Button)\r\n        var doubleBtnButton = doubleBtn.getComponent(cc.Button)\r\n        this.setButtonEnable(splitBtnButton,canSplit)\r\n        this.setButtonEnable(doubleBtnButton,canDouble)\r\n\r\n        // splitBtn.setTouchEnabled(canSplit);\r\n        // doubleBtn.setTouchEnabled(canDouble);\r\n\r\n    },\r\n    findButtonByType: function(type){\r\n        for (var i = 0, lenI = this._operateButtons.length; i < lenI; i++) {\r\n            var btn = this._operateButtons[i];\r\n            if (btn.type == type) {\r\n                return btn;\r\n            }\r\n        }\r\n\r\n        for (var i = 0, lenI = this._betButtons.length; i < lenI; i++) {\r\n            var btn = this._betButtons[i];\r\n            if (btn.type == type) {\r\n                return btn;\r\n            }\r\n        }\r\n\r\n        for (var i = 0, lenI = this._otherButtons.length; i < lenI; i++) {\r\n            var btn = this._otherButtons[i];\r\n            if (btn.type == type) {\r\n                return btn;\r\n            }\r\n        }\r\n    }\r\n});\r\n"]}