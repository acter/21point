{"version":3,"sources":["../../../../assets/Script/components/panel_anim.js"],"names":["cc","Class","extends","Component","properties","onLoad","zjtsgArray","anim_fruit","node","getChildByName","anim_dajiang","anim_zhongjiang","anim_gold","onDestroy","playDJTX","callback","Math","random","onfire","fire","spine","getComponent","sp","Skeleton","active","setAnimation","setCompleteListener","playYBZJJBTX","floor","playZJTSG","index","newNode","instantiate","addChild","stopZJTSG","i","length"],"mappings":"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","file":"panel_anim.js","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n/*        atlas: {\r\n            type: cc.SpriteAtlas,\r\n            default: null\r\n        },*/\r\n    },\r\n\r\n    onLoad: function() {\r\n        this.zjtsgArray = [];\r\n        this.anim_fruit = this.node.getChildByName(\"anim_fruit\")\r\n        this.anim_dajiang = this.node.getChildByName(\"anim_dajiang\")\r\n        this.anim_zhongjiang = this.node.getChildByName(\"anim_zhongjiang\")\r\n        this.anim_gold = this.node.getChildByName(\"anim_gold\")\r\n\r\n    },\r\n\r\n    onDestroy: function() {\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * 播放大奖特效\r\n     */\r\n    playDJTX: function(callback) {\r\n\r\n        var node = this.anim_zhongjiang\r\n        if (Math.random() < 0.5) {\r\n            onfire.fire(\"PLAY_MUSIC_EFFECT\", \"sound/mega_win\")\r\n        } else {\r\n            onfire.fire(\"PLAY_MUSIC_EFFECT\", \"sound/mega_win_cheer\")\r\n            node = this.anim_dajiang\r\n        }\r\n\r\n        var spine = node.getComponent(sp.Skeleton)\r\n        spine.active = true\r\n        spine.setAnimation(0, \"Animation1\", false); //播放选择动画\r\n        spine.setCompleteListener(function() {\r\n            node.active = false\r\n            callback && callback();\r\n        });\r\n    },\r\n\r\n\r\n    /**\r\n     * 一般中奖金币特效\r\n     */\r\n    playYBZJJBTX: function(callback) {\r\n\r\n        var node = this.anim_gold\r\n        var spine = node.getComponent(sp.Skeleton)\r\n        node.active = true\r\n        spine.setAnimation(0, \"Animation\" + (Math.floor(Math.random() * 3) + 1), false); //播放选择动画\r\n        spine.setCompleteListener(function() {\r\n            node.active = false\r\n            callback && callback();\r\n            \r\n        });\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * 中奖提示光\r\n     * @param index\r\n     */\r\n    playZJTSG: function(index) {\r\n\r\n        if (!this.zjtsgArray[index]) {\r\n            var newNode = cc.instantiate(this.anim_fruit)\r\n            this.node.addChild(newNode)\r\n\r\n            this.zjtsgArray[index] = newNode;\r\n        }\r\n        var node = this.zjtsgArray[index]\r\n        node.active = true\r\n        var spine = node.getComponent(sp.Skeleton)\r\n        spine.setAnimation(0, \"Animation1\" + index, false); //播放选择动画\r\n\r\n    },\r\n    /**\r\n     * 停止中奖提示光\r\n     */\r\n    stopZJTSG: function() {\r\n        if (!this.zjtsgArray) {\r\n            return\r\n        }\r\n\r\n        for (var i = 0; i < this.zjtsgArray.length; ++i) {\r\n            if (this.zjtsgArray[i]) {\r\n                this.zjtsgArray[i].active = false;\r\n            }\r\n\r\n        }\r\n    }\r\n\r\n\r\n});"]}