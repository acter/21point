{"version":3,"sources":["../../../../assets/Script/scene/shuiguoji.js"],"names":["NetHelp","require","subGameMSG","ClientKernel","GD","define","gameCMD","gameEvent","gameConst","ZZConfig","cc","Class","extends","Component","onLoad","fruitSlotArray","nowSlotIndex","preSlotIndex","slotIndexNode","winSlotArray","leftScore","myScore","lightPos","yazhu","initNodes","clearBet","initFruitSlots","clearSlot","doWaitAni","initData","Node","node","addChild","bindEvent","onEnterGame","start","update","dt","isStart","Math","floor","y","length","setSlotBright","node_nums","getChildByName","node_fruits","node_btns","center","instance_light","music","getComponent","panel_anim","lbl_lucky","find","Label","lbl_myscore","leftScoreLabel","btn_all","btn_begin","btn_da","btn_xiao","btn_zuo","btn_you","i","children","btn_fruit","on","onFruitBtnClick","bind","onFruitBtnStartClick","onStartBtnClick","onBtnAllClick","onBtnAllStartClick","onBtnDaClick","onBtnXiaoClick","onBtnZuoClick","onBtnYouClick","bindObj","push","onfire","onEventGameMessage","onEventSceneMessage","onDestroy","un","clientKernel","getRoomInfo","userItem","myUserItem","score","refreshMyScore","playMusicEffect","effectName","loop","play_effect","stopEffect","effectID","stop_effect","sendGameData","subCMD","data","sendSocketData","MDM_GF_GAME","S_BET_RESULT","onBetResult","S_START_RESULT","onStartResult","gameStatus","coreConfig","console","log","zhuanZhuanResult","zhuanZhuan","shift","refreshLeftScore","error","string","pad","brightArray","Array","isBright","j","bright","setSlotTwinkle","slotTime","slotIndexArray","slotIndex","twinkle","handleWinSlot","winSlotIndex","alwaysLight","fruitsType","SlotValueArray","config","SoundAndMulConfig","type","self","playYBZJJBTX","mul","end","finishCallback","onZhuanZhuanFinish","setPositionY","accDy","uniSpeed","accTime","uniDy","uniTime","decDy","decTime","allDy","uniDyEx","uniDtEx","uniSound","stopAllActions","action","sequence","callFunc","moveBy","easing","easeSineIn","spawn","delayTime","easeExponentialOut","runAction","slot","newNode","instantiate","setPosition","script","addComponent","turnOff","setFruitLabelValue","stopZJTSG","index","value","lbl","isRunWaitAni","waitAni","stopWaitAni","event","C_START","fruitsBetValueArray","unscheduleAllCallbacks","addAllFruit","interval","repeat","delay","schedule","fruitType","addFruit","num","str_len","substr","old_value","preEnd","status","Fruits","Lucky","soundIndex","random","sound","dtArray","callback","LuckyType","DaSanYuan","handleGroupAward","Group","XiaoSanYuan","DaSiXi","XiaoSiXi","ZHSH","JLBT","DaManGuan","Continue","Fail","onAllFinish","groupAwardConfig","groupAward","award","indexSet","recursiveHandleGroupAward","isPlayThen","connectTo","isPlayThan","slotNum","moveTo","abs","paSpeed","playWinningMusic","onAllFinishWithWin","bigSmallBeat","betArray","isBig","betType","big","betNumNode","blink","repeatForever","playZJTSG","playDJTX","onAllFinishWithLose","temp","stopBigSmallBeat","isBigSmallBeat","setLuckyValue"],"mappings":"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","file":"shuiguoji.js","sourcesContent":["var NetHelp = require(\"NetHelp\")\r\nvar subGameMSG = require(\"SubGameMSG\").subGameMSG\r\nvar ClientKernel = require(\"ClientKernel\")\r\nvar GD = require(\"GD\")\r\nvar define = require('define');\r\nvar gameCMD = define.gameCMD;\r\nvar gameEvent = define.gameEvent;\r\nvar gameConst = define.gameConst;\r\nvar ZZConfig = require(\"Config\").ZZConfig\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    // use this for initialization\r\n    onLoad: function() {\r\n        this.fruitSlotArray = []\r\n        this.nowSlotIndex = 0 //当前光标所在的槽位置\r\n        this.preSlotIndex = 0 //前一帧光标所在的槽位置\r\n        this.slotIndexNode = null //   //当前槽indexNode， 用来执行动作， 以node的Y坐标表示当前转动槽所在index, 方便控制， 方便利用cocos原有的动作函数\r\n        this.winSlotArray = [];\r\n        this.leftScore = 0;\r\n        this.myScore = 0;\r\n        this.lightPos = 0 //光标位置\r\n        this.yazhu = [0, 0, 0, 0, 0, 0, 0, 0]\r\n        this.initNodes()\r\n\r\n        this.clearBet()\r\n        this.initFruitSlots()\r\n        this.clearSlot()\r\n        this.doWaitAni()\r\n        this.initData()\r\n        this.slotIndexNode = new cc.Node()\r\n        this.node.addChild(this.slotIndexNode)\r\n\r\n        this.bindEvent()\r\n        this.onEnterGame()\r\n\r\n    },\r\n\r\n    start() {\r\n\r\n    },\r\n\r\n    update: function(dt) {\r\n        if (this.isStart) {\r\n            this.nowSlotIndex = Math.floor(this.slotIndexNode.y % this.fruitSlotArray.length);\r\n            this.setSlotBright(this.nowSlotIndex);\r\n            this.preSlotIndex = this.nowSlotIndex;\r\n        }\r\n    },\r\n\r\n    initNodes() {\r\n        this.node_nums = this.node.getChildByName(\"node_nums\")\r\n        this.node_fruits = this.node.getChildByName(\"node_fruits\")\r\n        this.node_btns = this.node.getChildByName(\"node_btns\")\r\n        this.center = this.node.getChildByName(\"center\")\r\n        this.instance_light = this.node.getChildByName(\"instance_light\")\r\n        this.music = this.node.getChildByName(\"music\").getComponent(\"music_play\")\r\n        this.panel_anim = this.node.getChildByName(\"panel_anim\").getComponent(\"panel_anim\")\r\n\r\n        //中间的数字\r\n        this.lbl_lucky = cc.find(\"node_lucky_num/lbl_lucky\", this.node).getComponent(cc.Label)\r\n        //我的总分\r\n        this.lbl_myscore = this.node.getChildByName(\"lbl_myscore\").getComponent(cc.Label)\r\n        //该轮得分\r\n        this.leftScoreLabel = this.node.getChildByName(\"lbl_gamescore\").getComponent(cc.Label)\r\n        this.btn_all = this.node_btns.getChildByName(\"btn_all\")\r\n        this.btn_begin = this.node_btns.getChildByName(\"btn_begin\")\r\n\r\n        this.btn_da = this.node_btns.getChildByName(\"btn_da\")\r\n        this.btn_xiao = this.node_btns.getChildByName(\"btn_xiao\")\r\n\r\n        this.btn_zuo = this.node_btns.getChildByName(\"btn_zuo\")\r\n        this.btn_you = this.node_btns.getChildByName(\"btn_you\")\r\n        //初始化最下面一排押注按钮\r\n        for (var i = 0; i < this.node_fruits.children.length; i++) {\r\n            var btn_fruit = this.node_fruits.children[i]\r\n            btn_fruit.on(\"touchend\", this.onFruitBtnClick.bind(this, i)) //每个按钮注册事件\r\n            btn_fruit.on(\"touchstart\", this.onFruitBtnStartClick.bind(this, i)) //每个按钮注册事件\r\n        }\r\n\r\n        this.btn_begin.on(\"touchend\", this.onStartBtnClick.bind(this))\r\n        this.btn_all.on(\"touchend\", this.onBtnAllClick.bind(this))\r\n        this.btn_all.on(\"touchstart\", this.onBtnAllStartClick.bind(this))\r\n        this.btn_da.on(\"touchend\", this.onBtnDaClick.bind(this))\r\n        this.btn_xiao.on(\"touchend\", this.onBtnXiaoClick.bind(this))\r\n        this.btn_zuo.on(\"touchend\", this.onBtnZuoClick.bind(this))\r\n        this.btn_you.on(\"touchend\", this.onBtnYouClick.bind(this))\r\n\r\n\r\n    },\r\n\r\n\r\n    bindEvent() {\r\n\r\n        this.bindObj = []\r\n        this.bindObj.push(onfire.on(\"onEventGameMessage\", this.onEventGameMessage.bind(this)))\r\n        this.bindObj.push(onfire.on(\"onEventSceneMessage\", this.onEventSceneMessage.bind(this)))\r\n\r\n    },\r\n\r\n    onDestroy() {\r\n        for (var i = 0; i < this.bindObj.length; i++) {\r\n            onfire.un(this.bindObj[i])\r\n        }\r\n\r\n    },\r\n\r\n\r\n    onEnterGame() {\r\n\r\n        GD.clientKernel.getRoomInfo() //进入游戏请求房间信息\r\n\r\n    },\r\n\r\n\r\n    initData() {\r\n        var clientKernel = GD.clientKernel\r\n\r\n        var userItem = clientKernel.myUserItem\r\n        if (userItem) {\r\n            this.myScore = userItem.score\r\n            this.refreshMyScore()\r\n\r\n        }\r\n    },\r\n    //播放音效\r\n    playMusicEffect(effectName, loop) {\r\n        //onfire.fire(\"PLAY_MUSIC_EFFECT\", effectName)\r\n        return this.music.play_effect(effectName, loop)\r\n    },\r\n    stopEffect(effectID) {\r\n        //onfire.fire(\"PLAY_MUSIC_EFFECT\", effectName)\r\n        this.music.stop_effect(effectID)\r\n    },\r\n\r\n    /**\r\n     * 发送子游戏事件\r\n     * @param subCMD\r\n     * @param data\r\n     */\r\n    sendGameData: function(subCMD, data) {\r\n        GD.clientKernel.sendSocketData(gameCMD.MDM_GF_GAME, subCMD, data);\r\n    },\r\n\r\n    /**\r\n     * 游戏消息事件\r\n     * @param subCMD 子游戏命令\r\n     * @param data 数据\r\n     * @returns {boolean}\r\n     */\r\n    onEventGameMessage: function(subCMD, data) {\r\n\r\n        switch (subCMD) {\r\n            case subGameMSG.S_BET_RESULT:\r\n                this.onBetResult(data);\r\n                break;\r\n            case subGameMSG.S_START_RESULT:\r\n                this.onStartResult(data);\r\n                break;\r\n\r\n            default:\r\n                return true;\r\n        }\r\n\r\n\r\n    },\r\n\r\n    /**\r\n     * 场景消息\r\n     * @param gameStatus\r\n     * @param data\r\n     * @returns {boolean}\r\n     */\r\n    onEventSceneMessage: function(gameStatus, data) {\r\n\r\n        GD.coreConfig = data.coreConfig;\r\n        console.log(\"onEventSceneMessage\", data)\r\n\r\n        return true;\r\n    },\r\n\r\n    /**\r\n     * 当启动后的结果\r\n     */\r\n    onStartResult: function(data) {\r\n        //转转的结果\r\n        this.zhuanZhuanResult = data.zhuanZhuanResult;\r\n\r\n        this.zhuanZhuan(this.zhuanZhuanResult.shift());\r\n    },\r\n\r\n\r\n    //设置左边分数\r\n    refreshLeftScore: function() {\r\n        console.error(\"refreshLeftScore\", this.leftScore)\r\n        this.leftScoreLabel.string = this.pad(this.leftScore, 9)\r\n    },\r\n\r\n    refreshMyScore: function() {\r\n        this.lbl_myscore.string = this.pad(this.myScore, 9)\r\n    },\r\n\r\n\r\n\r\n    //把数组指定的区域点亮\r\n    setSlotBright: function(brightArray) {\r\n\r\n        if (brightArray instanceof Array) {\r\n            for (var i = 0; i < this.fruitSlotArray.length; ++i) {\r\n                var isBright = false;\r\n                for (var j = 0; j < brightArray.length; ++j) {\r\n                    if (i == brightArray[j]) {\r\n                        isBright = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (isBright) {\r\n                    this.fruitSlotArray[i].bright();\r\n                }\r\n            }\r\n        } else {\r\n            this.nowSlotIndex = brightArray;\r\n            for (var i = 0; i < this.fruitSlotArray.length; ++i) {\r\n                if (brightArray == i) {\r\n                    this.fruitSlotArray[i].bright();\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n    },\r\n\r\n    //设置槽闪烁\r\n    setSlotTwinkle: function(slotTime, slotIndexArray) {\r\n\r\n        for (var i = 0; i < slotIndexArray.length; ++i) {\r\n            var slotIndex = slotIndexArray[i];\r\n            this.fruitSlotArray[slotIndex].twinkle(slotTime);\r\n        }\r\n    },\r\n\r\n    /**\r\n     * 加分什么的\r\n     * @param winSlotIndex\r\n     * @returns {boolean}\r\n     */\r\n    handleWinSlot: function(winSlotIndex) {\r\n\r\n        winSlotIndex %= this.fruitSlotArray.length;\r\n        winSlotIndex = Math.floor(winSlotIndex);\r\n        this.fruitSlotArray[winSlotIndex].alwaysLight();\r\n        this.winSlotArray.push(winSlotIndex);\r\n\r\n        var fruitsType = GD.coreConfig.SlotValueArray[winSlotIndex];\r\n\r\n        var config = GD.coreConfig.SoundAndMulConfig[fruitsType];\r\n\r\n\r\n        if (this.yazhu[config.type] > 0) {\r\n            var self = this;\r\n            //this.lockInput();\r\n            this.panel_anim.playYBZJJBTX(function() {\r\n                self.leftScore += self.yazhu[config.type] * config.mul\r\n                self.refreshLeftScore();\r\n\r\n            });\r\n\r\n            return true;\r\n        }\r\n\r\n\r\n        return false;\r\n\r\n    },\r\n\r\n    /**\r\n     * 转转，\r\n     * @param end  停在指定位置\r\n     * @param finishCallback 停止旋转后的回调函数\r\n     * @param start 开始位置， 未指定则为当前位置\r\n     */\r\n    zhuanZhuan: function(end, finishCallback, start) {\r\n\r\n\r\n        finishCallback = finishCallback || this.onZhuanZhuanFinish.bind(this);\r\n\r\n        start = start == null ? this.nowSlotIndex : start;\r\n\r\n\r\n        var self = this;\r\n        this.slotIndexNode.setPositionY(start);\r\n\r\n        var accDy = ZZConfig.uniSpeed * ZZConfig.accTime / 2;\r\n        var uniDy = ZZConfig.uniSpeed * ZZConfig.uniTime;\r\n        var decDy = ZZConfig.uniSpeed * ZZConfig.decTime / 7;\r\n\r\n\r\n        var allDy = (start + accDy + uniDy + decDy);\r\n\r\n        var uniDyEx = end - allDy % this.fruitSlotArray.length; // 在匀速期间 额外增加的位移, 控制结果用的\r\n        var uniDtEx = uniDyEx / ZZConfig.uniSpeed; // 在匀速期间 额外增加的时间\r\n\r\n        var uniSound = null; //匀速音效\r\n\r\n        this.slotIndexNode.stopAllActions();\r\n        var action = cc.sequence(\r\n            cc.callFunc(function() {\r\n                self.isStart = true;\r\n                self.playMusicEffect(\"sound/go_start\");\r\n            }),\r\n            cc.moveBy(ZZConfig.accTime, 0, accDy).easing(cc.easeSineIn()),\r\n            cc.spawn(cc.callFunc(function() {\r\n                    uniSound = self.playMusicEffect(\"sound/go_ing\", true);\r\n                }),\r\n                cc.moveBy(ZZConfig.uniTime + uniDtEx, 0, uniDy + uniDyEx)\r\n            ),\r\n\r\n            //因为cc.easeExponentialOut 曲线后段部分实在是太平了， 导致y基本没变化， 但还要过很久才完全停下来， 所以这边提前1.5秒当他结束了。\r\n            //也强制下  旋转的结果\r\n            cc.spawn(cc.sequence(cc.callFunc(function() {\r\n                    self.stopEffect(uniSound);\r\n                    self.playMusicEffect(\"sound/go_ending\");\r\n                }), cc.delayTime(ZZConfig.decTime - 1.5), cc.callFunc(function() {\r\n                    self.isStart = false;\r\n                    self.fruitSlotArray[end].bright();\r\n                    self.playMusicEffect(\"sound/go_end\");\r\n                }), cc.delayTime(0.5), cc.callFunc(function() {\r\n                    if (finishCallback) {\r\n                        finishCallback(end);\r\n                    }\r\n                })),\r\n                cc.moveBy(ZZConfig.decTime, 0, decDy).easing(cc.easeExponentialOut())\r\n            )\r\n        );\r\n        this.slotIndexNode.runAction(action);\r\n\r\n\r\n    },\r\n\r\n\r\n\r\n    //初始化中间转盘灯\r\n    initFruitSlots: function() {\r\n        for (var i = 0; i < this.center.children.length; i++) {\r\n            var slot = this.center.children[i] //每个灯的槽位\r\n            var newNode = cc.instantiate(this.instance_light) // 加一个灯\r\n            newNode.setPosition(0, 0)\r\n            slot.addChild(newNode)\r\n            var script = slot.addComponent(\"FruitSlot\")\r\n            this.fruitSlotArray[i] = script\r\n        }\r\n    },\r\n\r\n    //\r\n    clearSlot: function() {\r\n        for (var i = 0; i < this.fruitSlotArray.length; ++i) {\r\n            this.fruitSlotArray[i].turnOff();\r\n        }\r\n    },\r\n\r\n    //把下注清零\r\n    clearBet: function() {\r\n        this.yazhu = [0, 0, 0, 0, 0, 0, 0, 0] //重新设置押注\r\n        //把下的注清0\r\n        for (var i = 0; i < this.node_nums.children.length; ++i) {\r\n            this.setFruitLabelValue(i, 0);\r\n            this.node_nums.children[i].stopAllActions();\r\n        }\r\n\r\n        //清掉中奖提示光\r\n        this.panel_anim.stopZJTSG();\r\n    },\r\n\r\n    /**\r\n     * 设置水果按钮值\r\n     * @param index\r\n     * @param value\r\n     */\r\n    setFruitLabelValue: function(index, value) {\r\n        var lbl = this.node_nums.children[index].getComponent(cc.Label)\r\n        lbl.string = this.pad(this.yazhu[index], 2) //显示灯\r\n    },\r\n\r\n\r\n    //待机动画\r\n    doWaitAni: function() {\r\n\r\n        if (!this.isStart) {\r\n            //正在押注也不会开始待机动画\r\n            for (var i = 0; i < this.yazhu.length; ++i) {\r\n                if (this.yazhu[i] > 0) {\r\n                    return;\r\n                }\r\n            }\r\n\r\n            if (!this.isRunWaitAni) {\r\n                this.clearSlot();\r\n                this.isRunWaitAni = true;\r\n                for (var i = 0; i < this.fruitSlotArray.length; ++i) {\r\n                    this.fruitSlotArray[i].node.stopAllActions();\r\n                    this.fruitSlotArray[i].waitAni(i % 6 * 4 / 6);\r\n                }\r\n\r\n            }\r\n\r\n        }\r\n\r\n    },\r\n\r\n    //停止待机动画\r\n    stopWaitAni: function() {\r\n        if (this.isRunWaitAni) {\r\n            this.isRunWaitAni = false;\r\n            for (var i = 0; i < this.fruitSlotArray.length; ++i) {\r\n                this.fruitSlotArray[i].stopAllActions();\r\n            }\r\n        }\r\n\r\n    },\r\n\r\n\r\n    //开始游戏\r\n    onStartBtnClick(event) {\r\n        this.clearSlot()\r\n        this.sendGameData(subGameMSG.C_START, {\r\n            fruitsBetValueArray: this.yazhu\r\n        })\r\n    },\r\n\r\n    onBtnAllClick(event) {\r\n        this.unscheduleAllCallbacks() //取消定时器\r\n        this.addAllFruit()\r\n\r\n    },\r\n    onBtnAllStartClick(event) {\r\n        console.log(\"onBtnAllStartClick\")\r\n        // 以秒为单位的时间间隔\r\n        var interval = 0.05;\r\n        // 重复次数\r\n        var repeat = 99;\r\n        // 开始延时\r\n        var delay = 0.5;\r\n        this.schedule(this.addAllFruit.bind(this), interval, repeat, delay);\r\n\r\n    },\r\n\r\n\r\n    onBtnDaClick(event) {\r\n\r\n    },\r\n\r\n    onBtnXiaoClick(event) {\r\n\r\n    },\r\n\r\n    onBtnZuoClick(event) {\r\n\r\n    },\r\n\r\n    onBtnYouClick(event) {\r\n\r\n    },\r\n\r\n\r\n    //押注\r\n    onFruitBtnClick(fruitType, event) {\r\n        this.unscheduleAllCallbacks() //取消定时器\r\n        this.addFruit(fruitType)\r\n    },\r\n\r\n    //%02d 补齐n位\r\n    pad(num, str_len) {\r\n        var y = \"::::::::::::::::::::::::::\" + num;\r\n        return y.substr(y.length - str_len);\r\n    },\r\n\r\n    addAllFruit() {\r\n        for (var i = 0; i < this.yazhu.length; i++) {\r\n            this.addFruit(i)\r\n        }\r\n    },\r\n\r\n    addFruit(fruitType) {\r\n\r\n        var old_value = this.yazhu[fruitType]\r\n        this.yazhu[fruitType] += 1\r\n        if (this.yazhu[fruitType] > 99) {\r\n            this.yazhu[fruitType] = 99\r\n        }\r\n        var lbl = this.node_nums.children[fruitType].getComponent(cc.Label)\r\n        lbl.string = this.pad(this.yazhu[fruitType], 2) //显示灯\r\n        this.myScore -= (this.yazhu[fruitType] - old_value)\r\n        this.refreshMyScore()\r\n    },\r\n\r\n\r\n    //押注\r\n    onFruitBtnStartClick(fruitType, event) {\r\n        console.log(\"onFruitBtnStartClick\", fruitType)\r\n        // 以秒为单位的时间间隔\r\n        var interval = 0.05;\r\n        // 重复次数\r\n        var repeat = 99;\r\n        // 开始延时\r\n        var delay = 0.5;\r\n        this.schedule(this.addFruit.bind(this, fruitType), interval, repeat, delay);\r\n    },\r\n\r\n\r\n    /**\r\n     * 当转完\r\n     * @param endIndex\r\n     */\r\n    onZhuanZhuanFinish: function(preEnd) {\r\n        //转完了\r\n        var self = this;\r\n        var fruitsType = GD.coreConfig.SlotValueArray[preEnd];\r\n\r\n        var status = 0; //0表示没中， 1表示中了， 2表示还在判定\r\n\r\n        switch (fruitsType) {\r\n\r\n            case GD.coreConfig.Fruits.Lucky: //幸运\r\n                status = 2;\r\n                var config = GD.coreConfig.SoundAndMulConfig[fruitsType];\r\n                var soundIndex = Math.floor(Math.random() * config.sound.length);\r\n                var sound = config.sound[soundIndex];\r\n                this.playMusicEffect(sound);\r\n                var end = this.zhuanZhuanResult.shift();\r\n\r\n                var dtArray = [2.2, 0.8, 1.2];\r\n                var dt = dtArray[soundIndex];\r\n                //console.log(dt);\r\n                this.setSlotTwinkle(dt, [preEnd]);\r\n                var callback = null;\r\n                switch (end) {\r\n\r\n                    case GD.coreConfig.LuckyType.DaSanYuan: //大三元\r\n                        callback = function() {\r\n                            self.handleGroupAward(GD.coreConfig.Group.DaSanYuan, preEnd);\r\n                        };\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.XiaoSanYuan: //小三元\r\n                        callback = function() {\r\n                            self.handleGroupAward(GD.coreConfig.Group.XiaoSanYuan, preEnd);\r\n                        };\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.DaSiXi: //大四喜\r\n                        callback = function() {\r\n                            self.handleGroupAward(GD.coreConfig.Group.DaSiXi, preEnd);\r\n                        };\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.XiaoSiXi: //小四喜\r\n                        callback = function() {\r\n                            self.handleGroupAward(GD.coreConfig.Group.XiaoSiXi, preEnd);\r\n                        };\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.ZHSH: //纵横四海\r\n                        callback = function() {\r\n                            self.handleGroupAward(GD.coreConfig.Group.ZHSH, preEnd);\r\n                        };\r\n\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.JLBT: //九莲宝灯\r\n                        callback = function() {\r\n                            self.handleGroupAward(GD.coreConfig.Group.JLBT, preEnd);\r\n                        };\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.DaManGuan: //大满贯\r\n                        callback = function() {\r\n                            self.handleGroupAward(GD.coreConfig.Group.DaManGuan, preEnd);\r\n                        };\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.Continue: //无它， 再转一次\r\n                        var end = this.zhuanZhuanResult.shift();\r\n                        callback = function() {\r\n                            self.zhuanZhuan(end);\r\n                        };\r\n                        break;\r\n                    case GD.coreConfig.LuckyType.Fail: //失败， 没掉了\r\n                        callback = function() {\r\n                            self.playMusicEffect(\"sound/fail\");\r\n                            self.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(function() {\r\n                                self.onAllFinish();\r\n                            })));\r\n                        };\r\n                        break;\r\n                }\r\n\r\n                this.node.runAction(cc.sequence(cc.delayTime(dt), cc.callFunc(callback)));\r\n\r\n                break;\r\n            default:\r\n                {\r\n                    var config = GD.coreConfig.SoundAndMulConfig[fruitsType];\r\n                    if (config) {\r\n                        var sound = config.sound[Math.floor(Math.random() * config.sound.length)];\r\n                        this.playMusicEffect(sound);\r\n                        if (this.handleWinSlot(preEnd)) {\r\n                            status = 1;\r\n                        }\r\n                    }\r\n\r\n                }\r\n        }\r\n\r\n        if (status == 0) {\r\n            this.onAllFinish();\r\n\r\n        } else if (status == 1) {\r\n            this.onAllFinish();\r\n        } else if (status == 2) {\r\n\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * 处理组合奖\r\n     * @param endGroup 组合奖， 各个奖所在的下标\r\n     */\r\n    handleGroupAward: function(groupAwardConfig, start) {\r\n\r\n        var groupAward = groupAwardConfig.award;\r\n\r\n        if (groupAward.length == 0) {\r\n            groupAward = [];\r\n            //如果是零， 则是大满贯\r\n            for (var i = 0; i < this.zhuanZhuanResult.length; ++i) {\r\n                var index = this.zhuanZhuanResult[i];\r\n                groupAward.push({\r\n                    type: GD.coreConfig.SlotValueArray[index],\r\n                    index: index\r\n                });\r\n            }\r\n        }\r\n\r\n        var self = this;\r\n\r\n        var indexSet = [];\r\n        for (var i = 0; i < groupAward.length; ++i) {\r\n            indexSet.push(groupAward[i].index);\r\n        }\r\n\r\n        this.recursiveHandleGroupAward(indexSet, start, function() {\r\n            self.playMusicEffect(groupAwardConfig.sound);\r\n\r\n            self.node.runAction(cc.sequence(cc.delayTime(1), cc.callFunc(function() {\r\n                self.onAllFinish();\r\n            })));\r\n\r\n        }, true);\r\n    },\r\n\r\n    /**\r\n     * 递归处理组合奖\r\n     * @param groupAward\r\n     * @param start\r\n     */\r\n    recursiveHandleGroupAward: function(groupAward, start, finishCallback, isPlayThen) {\r\n\r\n        var self = this;\r\n        if (groupAward.length > 0) {\r\n            var end = groupAward.shift();\r\n            this.connectTo(start, end, isPlayThen, function() {\r\n                self.recursiveHandleGroupAward(groupAward, start, finishCallback, true);\r\n            })\r\n        } else {\r\n            if (finishCallback) {\r\n                finishCallback();\r\n            }\r\n        }\r\n    },\r\n\r\n\r\n    /**\r\n     * 起点 出发， 点亮 终点 内部自动选择顺逆时针,\r\n     * @param start 起始位置\r\n     * @param end   结束位置\r\n     */\r\n    connectTo: function(start, end, isPlayThan, finishCallback) {\r\n\r\n        var slotNum = this.fruitSlotArray.length;\r\n\r\n        // var dir = -1;   //-1顺时针， 1逆时针\r\n        // if (Math.abs(end - start) > slotNum / 2) {\r\n        //     if (end > start) {\r\n        //         start += slotNum;\r\n        //     }\r\n        //     else {\r\n        //         end += slotNum;\r\n        //     }\r\n        // }\r\n        // dir = end - start > 0 ? -1 : 1;\r\n        //有bug，先全改成-1\r\n\r\n        var dt = 1.2;\r\n        var self = this;\r\n        if (isPlayThan) {\r\n            this.playMusicEffect(\"sound/than\");\r\n            this.setSlotTwinkle(dt, [start % slotNum]);\r\n        } else {\r\n            dt = 0;\r\n        }\r\n\r\n        var action = cc.sequence(cc.delayTime(dt), cc.callFunc(function() {\r\n\r\n            self.nowSlotIndex = start;\r\n            self.preSlotIndex = start;\r\n            self.isStart = true;\r\n            self.slotIndexNode.setPositionY(start);\r\n            self.slotIndexNode.runAction(cc.sequence(\r\n                //多加0.5， 防止向下取整时误差， 导致差一格\r\n                cc.moveTo(Math.abs(end + 0.5 - start) / ZZConfig.paSpeed, 0, end + 0.5),\r\n                cc.callFunc(function() {\r\n                    self.playMusicEffect(\"sound/pa\");\r\n                    self.handleWinSlot(end);\r\n                }),\r\n                cc.delayTime(0.5),\r\n                cc.callFunc(function() {\r\n\r\n                    self.isStart = false;\r\n                    if (finishCallback) {\r\n                        finishCallback(end % slotNum);\r\n                    }\r\n                })\r\n            ));\r\n        }));\r\n        this.node.runAction(action);\r\n\r\n    },\r\n\r\n\r\n    //播放中奖声音\r\n    playWinningMusic: function() {\r\n        this.playMusicEffect(\"sound/C0\" + (Math.floor(Math.random() * 11) + 1), false);\r\n    },\r\n\r\n    /**\r\n     * 当全部转完， 且获得奖励\r\n     */\r\n    onAllFinishWithWin: function() {\r\n        this.playWinningMusic();\r\n        this.bigSmallBeat();\r\n\r\n        var betArray = [];\r\n\r\n        //是否中了大奖\r\n        var isBig = false;\r\n        //槽闪烁\r\n        for (var i = 0; i < this.winSlotArray.length; ++i) {\r\n            var slotIndex = this.winSlotArray[i];\r\n\r\n            this.fruitSlotArray[slotIndex].twinkle(null, true);\r\n\r\n\r\n            //betArray[GD.coreConfig.]\r\n            var betType = GD.coreConfig.SoundAndMulConfig[GD.coreConfig.SlotValueArray[slotIndex]].type;\r\n            if (this.yazhu[betType] > 0) {\r\n                betArray[betType] = true;\r\n\r\n                if (this.fruitSlotArray[slotIndex].big) {\r\n                    isBig = true;\r\n                }\r\n            }\r\n        }\r\n\r\n        //筹码闪烁\r\n        for (var i = 0; i < this.yazhu.length; ++i) {\r\n            if (betArray[i]) {\r\n                var betNumNode = this.node_nums.children[i]\r\n                betNumNode.runAction(cc.blink(1, 4).repeatForever());\r\n                this.panel_anim.playZJTSG(i + 1);\r\n            } else {\r\n                this.setFruitLabelValue(i, 0);\r\n\r\n            }\r\n        }\r\n\r\n        if (isBig) {\r\n\r\n            this.panel_anim.playDJTX();\r\n        }\r\n\r\n\r\n    },\r\n\r\n    onAllFinishWithLose: function() {\r\n        this.clearBet();\r\n        this.node.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(this.doWaitAni.bind(this))));\r\n    },\r\n    onAllFinish: function() {\r\n\r\n        var temp = [];\r\n\r\n\r\n        for (var i = 0; i < this.winSlotArray.length; ++i) {\r\n            if (this.yazhu[GD.coreConfig.SoundAndMulConfig[GD.coreConfig.SlotValueArray[this.winSlotArray[i]]].type] > 0) {\r\n                temp.push(this.winSlotArray[i]);\r\n            } else {\r\n                // this.fruitSlotArray[this.winSlotArray[i]].turnOff();\r\n            }\r\n        }\r\n\r\n        this.winSlotArray = temp;\r\n        if (this.winSlotArray.length > 0) {\r\n\r\n            this.onAllFinishWithWin();\r\n        } else {\r\n\r\n            this.onAllFinishWithLose();\r\n        }\r\n\r\n    },\r\n\r\n\r\n    /**\r\n     * 停止大小跳动\r\n     */\r\n    stopBigSmallBeat: function() {\r\n        this.isBigSmallBeat = false;\r\n        this.lbl_lucky.node.stopAllActions();\r\n    },\r\n\r\n    /**\r\n     * 大小跳动\r\n     */\r\n    bigSmallBeat: function() {\r\n\r\n        if (!this.isBigSmallBeat) {\r\n            this.stopBigSmallBeat();\r\n            var delayTime = 0.1;\r\n            var self = this;\r\n            this.isBigSmallBeat = true;\r\n            this.lbl_lucky.node.runAction(\r\n                cc.sequence(cc.delayTime(delayTime), cc.callFunc(function() {\r\n\r\n                    var value = Math.floor(Math.random() * 14) + 1;\r\n                    self.setLuckyValue(value);\r\n                })).repeatForever()\r\n            );\r\n        }\r\n\r\n    },\r\n\r\n    /**\r\n     * 设置大小跳动值label的值\r\n     * @param value\r\n     */\r\n    setLuckyValue: function(value) {\r\n        this.lbl_lucky.string = value\r\n        if (value < 10) {\r\n            this.lbl_lucky.string = (\"0\" + value);\r\n        }\r\n\r\n    },\r\n\r\n\r\n    // update (dt) {},\r\n});"]}