{"version":3,"sources":["../../../../assets/Script/common/Helper.js"],"names":["GD","require","Helper","wxLoginCallBack","wxShareCallBack","formatStr","num","sep","chars","toString","result","length","slice","toThousands","src","to10Thousands","toWan","Math","floor","md5","SparkMD5","hash","toUpperCase","getPlayer","wTableID","wChairID","Tables","userID","players","AllUsers","convertMoneyToCapitals","n","test","unit","str","p","indexOf","substr","i","charAt","replace","getGUid","S4","random","substring","creatNode","prefab_name","cb","cc","loader","loadRes","err","prefab","newNode","instantiate","MessageBox","text","style","find","addChild","script","getComponent","JsBridge","isPortrait","callback","frameSize","view","getFrameSize","isOrientationP","console","log","sys","isBrowser","setFrameSize","height","width","setOrientation","macro","ORIENTATION_PORTRAIT","ORIENTATION_LANDSCAPE","os","OS_ANDROID","jsb","reflection","callStaticMethod","OS_IOS","setTimeout","loadGameScene","director","loadScene","loadHallScene","wxLogin","isNative","wxShareText","isTimeLine","wxShareCurrentScreen","rootNode","shareScreenShoot","shareNode","hideNodes","hasMask","renderTexture","RenderTexture","create","Texture2D","PIXEL_FORMAT_RGBA8888","gl","DEPTH24_STENCIL8_OES","position","begin","setChildVisible","active","_sgNode","visit","end","fileName","imagePath","fileUtils","getWritablePath","saveToFile","ImageFormat","PNG","GameTools","wxShareImage","imgFilePath","wxShareWebUrl","url","title","content","node","index","getGameVersion","version","module","exports"],"mappings":"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","file":"Helper.js","sourcesContent":["var GD = require(\"GD\")\r\n\r\nvar Helper = {};\r\n\r\n/**\r\n * 微信登录的回调，一个参数是openid\r\n * @type (openid)=>{}\r\n */\r\nHelper.wxLoginCallBack = null;\r\n\r\n/**\r\n * 微信分享的回调\r\n * @type  (errCode)=>{}\r\n */\r\nHelper.wxShareCallBack = null;\r\n\r\n\r\nHelper.formatStr = function (num, sep, chars) {\r\n    var num = (num || 0).toString(),\r\n        result = '';\r\n    while (num.length > chars) {\r\n        result = sep + num.slice(-chars) + result;\r\n        num = num.slice(0, num.length - chars);\r\n    }\r\n    if (num) {\r\n        result = num + result;\r\n    }\r\n    return result;\r\n}\r\n\r\n//一个数字字符串，从右到左每隔3位加入一个逗号(1234567890 --> 1,234,567,890)\r\nHelper.toThousands = function (src) {\r\n    return this.formatStr(src, \",\", 3)\r\n}\r\n//转换为万字\r\nHelper.to10Thousands = function (src) {\r\n    return this.formatStr(src, \" \", 4)\r\n}\r\n\r\n//数字转x.x(万)\r\nHelper.toWan = function (src) {\r\n    return Math.floor(src / 1000) / 10\r\n}\r\n\r\n\r\nHelper.md5 = function (src) {\r\n    return SparkMD5.hash(src).toUpperCase(); // hex hash\r\n}\r\n\r\n\r\n//根据座位号椅子号获取玩家\r\nHelper.getPlayer = function (wTableID, wChairID) {\r\n\r\n    if (GD.Tables[wTableID]) {\r\n        var userID = GD.Tables[wTableID][wChairID]\r\n        var players = GD.AllUsers\r\n        if (userID && players[userID]) {\r\n            return players[userID]\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 金额小写转大写\r\n * @param n\r\n * @returns {*}\r\n */\r\nHelper.convertMoneyToCapitals = function (n) {\r\n    if (n == 0) {\r\n        return \"零\"\r\n    }\r\n    if (!/^(0|[1-9]\\d*)(\\.\\d+)?$/.test(n))\r\n        return \"数据非法\";\r\n    var unit = \"万千百拾亿千百拾万千百拾元\",\r\n        str = \"\";\r\n    n += \"\"\r\n    var p = n.indexOf('.');\r\n    if (p >= 0)\r\n        return \"数据非法\";\r\n    unit = unit.substr(unit.length - n.length);\r\n    for (var i = 0; i < n.length; i++)\r\n        str += '零壹贰叁肆伍陆柒捌玖'.charAt(n.charAt(i)) + unit.charAt(i);\r\n    return str.replace(/零(千|百|拾|角)/g, \"零\").replace(/(零)+/g, \"零\").replace(/零(万|亿|元)/g, \"$1\").replace(/(亿)万|壹(拾)/g, \"$1$2\").replace(/^元零?|零分/g, \"\").replace(/元$/g, \"\");\r\n};\r\n\r\n\r\nHelper.getGUid = function () {\r\n    function S4() {\r\n        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n    }\r\n\r\n    return (S4() + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + \"-\" + S4() + S4() + S4());\r\n}\r\n\r\n\r\n//创建预设\r\nHelper.creatNode = function (prefab_name, cb) {\r\n\r\n\r\n    cc.loader.loadRes(prefab_name, function (err, prefab) {\r\n        var newNode = cc.instantiate(prefab);\r\n        cb(newNode)\r\n    })\r\n}\r\n\r\n\r\n//弹框\r\n/**\r\n * @style     (0,null)= 确定  1=确认 + 取消\r\n * @cb   点了确定之后回调，\r\n */\r\nHelper.MessageBox = function (text, style, cb) {\r\n\r\n    cc.loader.loadRes(\"prefab/panel_messagebox\", function (err, prefab) {\r\n        var newNode = cc.instantiate(prefab);\r\n        cc.find(\"Canvas\").addChild(newNode);\r\n        var script = newNode.getComponent(\"panel_messagebox\")\r\n        script.MessageBox(text, style, cb)\r\n\r\n    })\r\n}\r\n\r\n/**\r\n * 屏幕旋转\r\n * @isPortrait 是否竖屏\r\n */\r\nHelper.JsBridge = function (isPortrait, callback) {\r\n    var frameSize = cc.view.getFrameSize();\r\n    if (Helper.isOrientationP() === isPortrait) {\r\n        console.log(\"屏幕方向正确，不需要改变\")\r\n        callback && callback();\r\n        return;\r\n    }\r\n\r\n    if (cc.sys.isBrowser) {\r\n        cc.view.setFrameSize(frameSize.height, frameSize.width);\r\n\r\n        if (isPortrait)\r\n            cc.view.setOrientation(cc.macro.ORIENTATION_PORTRAIT);\r\n        else\r\n            cc.view.setOrientation(cc.macro.ORIENTATION_LANDSCAPE);\r\n\r\n        callback && callback();\r\n        return;\r\n    }\r\n\r\n    let num = isPortrait === true ? 2 : 1;\r\n\r\n    console.log(\"开始调整屏幕方向\");\r\n    if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"org/cocos2dx/javascript/AppActivity\", \"setOrientation\", \"(I)V\", num);\r\n    }\r\n    else if (cc.sys.os === cc.sys.OS_IOS) {\r\n        jsb.reflection.callStaticMethod(\"AppController\", \"changeOrientation:\", isPortrait);\r\n    }\r\n\r\n    setTimeout(function () {\r\n        console.log(\"回调\");\r\n        callback && callback();\r\n    }, 100);\r\n\r\n};\r\n\r\n/**\r\n * 切换到游戏场景\r\n */\r\nHelper.loadGameScene = function () {\r\n    Helper.JsBridge(false, () => {\r\n        cc.director.loadScene(\"sss\");\r\n    });\r\n};\r\n\r\n/**\r\n * 切换到大厅场景\r\n */\r\nHelper.loadHallScene = function () {\r\n    Helper.JsBridge(true, () => {\r\n        cc.director.loadScene(\"ssshall\");\r\n    });\r\n};\r\n\r\nHelper.isOrientationP = function () {\r\n    var frameSize = cc.view.getFrameSize();\r\n    return frameSize.height > frameSize.width;\r\n};\r\n\r\n/**\r\n * 微信登录，非原生调用无效\r\n */\r\nHelper.wxLogin = function () {\r\n    if (!cc.sys.isNative) return;\r\n\r\n    if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"cn/dapenggame/lxsss/SDKManager\", \"wxLogin\", \"()V\");\r\n    }\r\n    else if (cc.sys.os === cc.sys.OS_IOS) {\r\n        jsb.reflection.callStaticMethod(\"PlatformSystem\", \"WxLogin\");\r\n    }\r\n};\r\n\r\n/**\r\n * 微信分享文本\r\n * @param text 文字内容\r\n * @param isTimeLine true表示朋友圈，false好友\r\n */\r\nHelper.wxShareText = function (text, isTimeLine) {\r\n    if (!cc.sys.isNative) return;\r\n\r\n    if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"cn/dapenggame/lxsss/SDKManager\", \"wxLogin\", \"()V\");\r\n    }\r\n    else if (cc.sys.os === cc.sys.OS_IOS) {\r\n        jsb.reflection.callStaticMethod(\"PlatformSystem\", \"wxShareTextWithText:shareScene\", text, isTimeLine ? 1 : 0);\r\n    }\r\n};\r\n\r\n/**\r\n * 截图整个屏幕并分享给好友\r\n */\r\nHelper.wxShareCurrentScreen = function () {\r\n    var rootNode = cc.find(\"Canvas\");\r\n    Helper.shareScreenShoot(rootNode, null, true, 0);\r\n};\r\n\r\n/**\r\n * 微信截图分享分享给好友\r\n * @param shareNode 截屏节点\r\n * @param hideNodes 隐藏节点\r\n * @param hasMask 是否有mask\r\n * @param isTimeLine 1表示朋友圈，0好友\r\n */\r\nHelper.shareScreenShoot = function (shareNode, hideNodes, hasMask, isTimeLine) {\r\n    if (!cc.sys.isNative) {\r\n        return;\r\n    }\r\n    //如果待截图的场景中含有 mask，请使用下面注释的语句来创建 renderTexture\r\n    var renderTexture;\r\n    if (!hasMask) {\r\n        renderTexture = cc.RenderTexture.create(shareNode.width, shareNode.height);\r\n    } else {\r\n        renderTexture = cc.RenderTexture.create(shareNode.width, shareNode.height, cc.Texture2D.PIXEL_FORMAT_RGBA8888, gl.DEPTH24_STENCIL8_OES);\r\n    }\r\n    //实际截屏的代码\r\n    var position = shareNode.position;\r\n    renderTexture.begin();\r\n    shareNode.position = cc.p(shareNode.width / 2, shareNode.height / 2);\r\n\r\n    if (hideNodes) {\r\n        Helper.setChildVisible(hideNodes, false);\r\n        hideNodes.active = false;\r\n    }\r\n\r\n    shareNode._sgNode.visit();\r\n    renderTexture.end();\r\n    let fileName = \"share_lxsss.jpg\";\r\n    var imagePath = jsb.fileUtils.getWritablePath() + fileName;\r\n    //saveToFile 默认是放在jsb.fileUtils.getWritablePath()的路径中，只能传入文件名\r\n    renderTexture.saveToFile(fileName, cc.ImageFormat.PNG, true, function () {\r\n        if (cc.sys.os == cc.sys.OS_ANDROID) {\r\n            console.log(\"调用接口\");\r\n            jsb.reflection.callStaticMethod(\"cn/dapenggame/lxsss/SDKManager\", \"WxShareImage\", \"(Ljava/lang/String;I)V\", imagePath, isTimeLine);\r\n        } else if (cc.sys.os == cc.sys.OS_IOS) {\r\n            return jsb.reflection.callStaticMethod(\"PlatformSystem\", \"wxShareImage:scene:\", imagePath, isTimeLine);\r\n        }\r\n\r\n        shareNode.position = position;\r\n        GameTools.setChildVisible(hideNodes, true);\r\n\r\n    });\r\n}\r\n\r\n/**\r\n * 微信分享图片\r\n * @param imgFilePath 图片路径\r\n * @param isTimeLine true表示朋友圈，false好友\r\n */\r\nHelper.wxShareImage = function (imgFilePath, isTimeLine) {\r\n    if (!cc.sys.isNative) return;\r\n\r\n    if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"cn/dapenggame/lxsss/SDKManager\", \"WxShareImage\", \"(Ljava/lang/String;I)V\", imgFilePath, isTimeLine);\r\n    }\r\n    else if (cc.sys.os === cc.sys.OS_IOS) {\r\n        jsb.reflection.callStaticMethod(\"PlatformSystem\", \"wxShareImage:scene：\", imgFilePath, isTimeLine ? 1 : 0);\r\n    }\r\n};\r\n\r\n/**\r\n * 微信分享网页链接\r\n * @param url 网页URL\r\n * @param title 标题\r\n * @param content 内容\r\n * @param isTimeLine true表示朋友圈，false好友\r\n */\r\nHelper.wxShareWebUrl = function (url, title, content, isTimeLine) {\r\n    if (!cc.sys.isNative) return;\r\n\r\n    if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n        jsb.reflection.callStaticMethod(\"cn/dapenggame/lxsss/SDKManager\", \"shareWebUrl\", \"(Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;Z)V\"\r\n            , url, title, content, isTimeLine);\r\n    }\r\n    else if (cc.sys.os === cc.sys.OS_IOS) {\r\n        jsb.reflection.callStaticMethod(\"PlatformSystem\", \"WxShareWebUrl:title:description:scene:\", url, title, content, isTimeLine ? 1 : 0);\r\n    }\r\n};\r\n\r\n/**\r\n * 隐藏或显示子节点\r\n * @param node 父节点\r\n * @param active 显示或隐藏\r\n */\r\nHelper.setChildVisible = function (node, active) {\r\n    if (!node) {\r\n        return;\r\n    }\r\n\r\n    for (var index in node) {\r\n        node[index].active = active;\r\n    }\r\n};\r\n\r\nHelper.getGameVersion = function () {\r\n    if (!cc.sys.isNative) return;\r\n\r\n    let version;\r\n    if (cc.sys.os === cc.sys.OS_ANDROID) {\r\n        version = jsb.reflection.callStaticMethod(\"cn/dapenggame/lxsss/SDKManager\", \"getGameVersion\", \"()Ljava/lang/String;\");\r\n    }\r\n    else if (cc.sys.os === cc.sys.OS_IOS) {\r\n        version = jsb.reflection.callStaticMethod(\"PlatformSystem\", \"getIOSGameVersion\");\r\n    }\r\n\r\n    console.log(\"version==\" + version);\r\n\r\n    return version;\r\n};\r\n\r\nmodule.exports = Helper;"]}